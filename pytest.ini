[pytest]
# ─── Paths ────────────────────────────────────────────────────────────────────
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# ─── Asyncio ──────────────────────────────────────────────────────────────────
asyncio_mode = auto

# ─── Output ───────────────────────────────────────────────────────────────────
addopts =
    --strict-markers
    --tb=short
    --alluredir=reports/allure-results
    --cov=utils
    --cov=config
    --cov-report=term-missing
    --cov-report=html:reports/coverage

# ─── Timeout ──────────────────────────────────────────────────────────────────
timeout = 60

# ─── Markers ──────────────────────────────────────────────────────────────────
markers =
    smoke:      Fast sanity checks (run on every commit)
    regression: Full regression suite
    p0:         Critical path — must pass before any release
    p1:         High priority
    p2:         Medium priority
    api:        Pure API / HTTP tests
    ui:         Browser-based UI tests
    integration:End-to-end integration tests
    slow:       Tests expected to take > 10 seconds
    flaky:      Known-flaky tests quarantined for investigation

# ─── Reruns (flakiness handling) ──────────────────────────────────────────────
reruns = 2
reruns_delay = 1
